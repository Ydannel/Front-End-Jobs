{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Danell\\\\Desktop\\\\Proyectos_React\\\\NodeSend(Mern_Stack)\\\\sendmimg\\\\pages\\\\enlaces\\\\[enlace].js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport Layout from '../../components/Layout';\nimport clienteAxios from '../../config/axios';\nimport React, { useState, useContext } from 'react';\nimport appContext from '../../context/app/appContext';\nimport Alerta from '../../components/Alerta'; //genera los resultados\n\n//genera las url de forma dinamica\nexport var __N_SSP = true;\nexport function getServerSidePaths() {\n  return _getServerSidePaths.apply(this, arguments);\n}\n\nfunction _getServerSidePaths() {\n  _getServerSidePaths = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var enlaces;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return clienteAxios.get('/api/enlaces');\n\n          case 2:\n            enlaces = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              paths: enlaces.data.enlaces.map(function (enlace) {\n                return {\n                  params: {\n                    enlace: enlace.url\n                  }\n                };\n              }),\n              fallback: false\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getServerSidePaths.apply(this, arguments);\n}\n\nexport default _s(function (_ref) {\n  _s();\n\n  var enlace = _ref.enlace;\n  // Contextapp\n  var AppContext = useContext(appContext);\n  var mostrarAlerta = AppContext.mostrarAlerta,\n      mensaje_archivo = AppContext.mensaje_archivo;\n\n  var _useState = useState(enlace.password),\n      tienePassword = _useState[0],\n      setTienePassword = _useState[1];\n\n  var _useState2 = useState(''),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  console.log(tienePassword);\n\n  var verificarPassword = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var data, resultado;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              data = {\n                password: password\n              };\n              _context.prev = 2;\n              _context.next = 5;\n              return clienteAxios.post(\"/api/enlaces/\".concat(enlace.enlace), data);\n\n            case 5:\n              resultado = _context.sent;\n              setTienePassword(resultado.data.password);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              mostrarAlerta(_context.t0.response.data.msg);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 9]]);\n    }));\n\n    return function verificarPassword(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, tienePassword ? __jsx(React.Fragment, null, __jsx(\"p\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 25\n    }\n  }, \"Este enlace esta protegido por un password, colocalo a continuaci\\xF3n\"), mensaje_archivo && __jsx(Alerta, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 46\n    }\n  }), __jsx(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }, __jsx(\"form\", {\n    className: \"\",\n    onSubmit: function onSubmit(e) {\n      return verificarPassword(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 37\n    }\n  }, __jsx(\"input\", {\n    type: \"password\",\n    className: \"\",\n    id: \"password\",\n    placeholder: \"Password del enlace\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 41\n    }\n  })), __jsx(\"input\", {\n    type: \"submit\",\n    className: \"bg-red-500 hover:bg-gray-900 w-full p-2 text-white uppercase font-bold\",\n    value: \"Validar Password...\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 37\n    }\n  }))))) : __jsx(React.Fragment, null, __jsx(\"h1\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, \"Descarga tu archivo:\"), __jsx(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    href: \"\".concat(process.env.backendURL, \"/api/archivos/\").concat(enlace.archivo),\n    className: \"\",\n    download: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, \"Aqu\\xED\"))));\n}, \"Qn/NtrJYBPDFG93GjgpCZ5+0yLA=\");","map":{"version":3,"sources":["C:/Users/Danell/Desktop/Proyectos_React/NodeSend(Mern_Stack)/sendmimg/pages/enlaces/[enlace].js"],"names":["Layout","clienteAxios","React","useState","useContext","appContext","Alerta","getServerSidePaths","get","enlaces","paths","data","map","enlace","params","url","fallback","AppContext","mostrarAlerta","mensaje_archivo","password","tienePassword","setTienePassword","setPassword","console","log","verificarPassword","e","preventDefault","post","resultado","response","msg","target","value","process","env","backendURL","archivo"],"mappings":";;;;;;;;AAAA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,QAA2C,OAA3C;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,MAAP,MAAmB,yBAAnB,C,CAGA;;AAcA;;AACA,gBAAsBC,kBAAtB;AAAA;AAAA;;;iFAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACuBN,YAAY,CAACO,GAAb,CAAiB,cAAjB,CADvB;;AAAA;AACOC,YAAAA,OADP;AAAA,8CAEQ;AACHC,cAAAA,KAAK,EAAED,OAAO,CAACE,IAAR,CAAaF,OAAb,CAAqBG,GAArB,CAA0B,UAAAC,MAAM;AAAA,uBAAM;AACzCC,kBAAAA,MAAM,EAAE;AAAED,oBAAAA,MAAM,EAAGA,MAAM,CAACE;AAAlB;AADiC,iBAAN;AAAA,eAAhC,CADJ;AAIHC,cAAAA,QAAQ,EAAE;AAJP,aAFR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAYP,kBAAe,gBAAc;AAAA;;AAAA,MAAZH,MAAY,QAAZA,MAAY;AAEzB;AACA,MAAMI,UAAU,GAAGb,UAAU,CAACC,UAAD,CAA7B;AAHyB,MAIhBa,aAJgB,GAImBD,UAJnB,CAIhBC,aAJgB;AAAA,MAIDC,eAJC,GAImBF,UAJnB,CAIDE,eAJC;;AAAA,kBAOmBhB,QAAQ,CAACU,MAAM,CAACO,QAAR,CAP3B;AAAA,MAOjBC,aAPiB;AAAA,MAOFC,gBAPE;;AAAA,mBAQSnB,QAAQ,CAAC,EAAD,CARjB;AAAA,MAQjBiB,QARiB;AAAA,MAQPG,WARO;;AAUzBC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,aAAZ;;AAGA,MAAMK,iBAAiB;AAAA,yEAAG,iBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACtBA,cAAAA,CAAC,CAACC,cAAF;AAEMjB,cAAAA,IAHgB,GAGT;AACTS,gBAAAA,QAAQ,EAARA;AADS,eAHS;AAAA;AAAA;AAAA,qBAQMnB,YAAY,CAAC4B,IAAb,wBAAkChB,MAAM,CAACA,MAAzC,GAAmDF,IAAnD,CARN;;AAAA;AAQZmB,cAAAA,SARY;AASlBR,cAAAA,gBAAgB,CAACQ,SAAS,CAACnB,IAAV,CAAeS,QAAhB,CAAhB;AATkB;AAAA;;AAAA;AAAA;AAAA;AAWlBF,cAAAA,aAAa,CAAC,YAAMa,QAAN,CAAepB,IAAf,CAAoBqB,GAArB,CAAb;;AAXkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBN,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAiBA,SACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQL,aAAa,GACT,4BACI;AAAG,IAAA,SAAS,EAAC,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8EADJ,EAGMF,eAAe,IAAI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHzB,EAII;AAAK,IAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,IAAA,SAAS,EAAC,EADd;AAEI,IAAA,QAAQ,EAAG,kBAAAQ,CAAC;AAAA,aAAID,iBAAiB,CAACC,CAAD,CAArB;AAAA,KAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAII;AAAK,IAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,IAAA,IAAI,EAAC,UADT;AAEI,IAAA,SAAS,EAAC,EAFd;AAGI,IAAA,EAAE,EAAC,UAHP;AAII,IAAA,WAAW,EAAC,qBAJhB;AAKI,IAAA,KAAK,EAAEP,QALX;AAMI,IAAA,QAAQ,EAAG,kBAAAO,CAAC;AAAA,aAAIJ,WAAW,CAACI,CAAC,CAACM,MAAF,CAASC,KAAV,CAAf;AAAA,KANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAJJ,EAeI;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,SAAS,EAAC,wEAFd;AAGI,IAAA,KAAK,EAAC,qBAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfJ,CADJ,CADJ,CAJJ,CADS,GAgCT,4BACI;AAAI,IAAA,SAAS,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,EAEI;AAAK,IAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,IAAA,IAAI,YAAKC,OAAO,CAACC,GAAR,CAAYC,UAAjB,2BAA4CxB,MAAM,CAACyB,OAAnD,CADR;AAEI,IAAA,SAAS,EAAC,EAFd;AAGI,IAAA,QAAQ,MAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CAFJ,CAlCZ,CADJ;AAkDH,CAhFD","sourcesContent":["import Layout from '../../components/Layout';\nimport clienteAxios from '../../config/axios';\nimport React, {useState, useContext } from 'react';\nimport appContext from '../../context/app/appContext';\nimport Alerta from '../../components/Alerta';\n\n\n//genera los resultados\nexport async function getServerSideProps({params}) {\n    const { enlace } = params;\n\n   const resultado = await clienteAxios.get(`/api/enlaces/${enlace}`);\n\n\n    return {\n        props: {\n            enlace: resultado.data\n        }\n    }\n}\n\n//genera las url de forma dinamica\nexport async function getServerSidePaths() {\n        const enlaces = await clienteAxios.get('/api/enlaces');\n        return {\n            paths: enlaces.data.enlaces.map( enlace => ( {\n                params: { enlace : enlace.url }\n            })),\n            fallback: false\n        }\n}\n\n\n\nexport default ({enlace}) => {\n\n    // Contextapp\n    const AppContext = useContext(appContext);\n    const {  mostrarAlerta, mensaje_archivo } = AppContext;\n    \n\n    const [ tienePassword, setTienePassword ] = useState(enlace.password);\n    const [ password, setPassword ] = useState('');\n\n    console.log(tienePassword)\n\n\n    const verificarPassword = async e => {\n        e.preventDefault();\n\n        const data = {\n            password\n        }\n\n        try {\n            const resultado = await clienteAxios.post(`/api/enlaces/${enlace.enlace}`, data);\n            setTienePassword(resultado.data.password);\n        } catch (error) {\n            mostrarAlerta(error.response.data.msg);\n        }\n        \n\n    }\n\n    return (\n        <Layout>\n            {\n                tienePassword ? (\n                    <>\n                        <p className=\"\">Este enlace esta protegido por un password, colocalo a continuación</p>\n\n                        { mensaje_archivo && <Alerta /> }\n                        <div className=\"\">\n                            <div className=\"\">\n                                <form\n                                    className=\"\"\n                                    onSubmit={ e => verificarPassword(e) }\n                                >\n                                    <div className=\"\">\n                                        <input\n                                            type=\"password\"\n                                            className=\"\"\n                                            id=\"password\"\n                                            placeholder=\"Password del enlace\"\n                                            value={password}\n                                            onChange={ e => setPassword(e.target.value) }\n                                        />\n                                    </div>\n\n                                    <input \n                                        type=\"submit\"\n                                        className=\"bg-red-500 hover:bg-gray-900 w-full p-2 text-white uppercase font-bold\"\n                                        value=\"Validar Password...\"\n                                    />\n                                </form>\n                            </div>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <h1 className=\"\">Descarga tu archivo:</h1>\n                        <div className=\"\">\n                            <a \n                                href={`${process.env.backendURL}/api/archivos/${enlace.archivo}`} \n                                className=\"\"\n                                download    \n                            >Aquí</a>\n                        </div>\n                    </>\n                )\n            }\n\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}